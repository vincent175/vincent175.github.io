<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
  /*
      http://www.oschina.net/question/124879_76399
  */
  
  html { font-size: 100%; overflow-y: scroll; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
   
  body{
      color:#444;
      font-family:Georgia, Palatino, 'Palatino Linotype', Times, 'Times New Roman', serif;
      font-size:13px;
      line-height:1.5em;
      padding:1em;
      margin:auto;
      max-width:42em;
      background:#fefefe;
  }
   
  h1, h2, h3, h4, h5, h6 {
      font-weight: bold;
  }
   
  h1 {
      color: #000000;
      font-size: 28px;
  }
   
  h2 {
      border-bottom: 2px solid #CCCCCC;
      color: #000000;
      font-size: 24px;
  }
   
  h3 {
      border-bottom: 2px solid #CCCCCC;
      font-size: 18px;
  }
   
  h4 {
      font-size: 16px;
  }
   
  h5 {
      font-size: 14px;
  }
   
  h6 {
      color: #777777;
      background-color: inherit;
      font-size: 14px;
  }
   
  hr {
      height: 0.2em;
      border: 0;
      color: #CCCCCC;
      background-color: #CCCCCC;
  }
   
  p, blockquote, ul, ol, dl, li, table, pre {
      margin: 15px 0;
  }
   
  p{
      margin:1em 0;
  }
   
  pre { 
      background-color: #F8F8F8;    
      border: 1px solid #CCCCCC;
      border-radius: 3px;
      overflow: auto;
      padding: 5px;
  }
   
  pre code {
      background-color: #F8F8F8;
      border: none;    
      padding: 0;
  }
   
  code {
      font-family: Consolas, Monaco, Andale Mono, monospace;
      background-color:#F8F8F8;
      border: 1px solid #CCCCCC;
      border-radius: 3px;
      padding: 0 0.2em;
      line-height: 1;
  }
   
  pre > code {
      border: 0;
      margin: 0;
      padding: 0;
  }
   
   
  a{ color: #0645ad; text-decoration:none;}
  a:visited{ color: #0b0080; }
  a:hover{ color: #06e; }
  a:active{ color:#faa700; }
  a:focus{ outline: thin dotted; }
  a:hover, a:active{ outline: 0; }
   
  ::-moz-selection{background:rgba(255,255,0,0.3);color:#000}
  ::selection{background:rgba(255,255,0,0.3);color:#000}
   
  a::-moz-selection{background:rgba(255,255,0,0.3);color:#0645ad}
  a::selection{background:rgba(255,255,0,0.3);color:#0645ad}
   
  blockquote{
      color:#666666;
      margin:0;
      padding-left: 3em;
      border-left: 0.5em #EEE solid;
  }
   
  ul, ol { margin: 1em 0; padding: 0 0 0 2em; }
  li p:last-child { margin:0 }
  dd { margin: 0 0 0 2em; }
   
  img { border: 0; -ms-interpolation-mode: bicubic; vertical-align: middle; max-width:100%;}
   
  table { border-collapse: collapse; border-spacing: 0; }
  td { vertical-align: top; }
   
  @media only screen and (min-width: 480px) {
      body{font-size:14px;}
  }
   
  @media only screen and (min-width: 768px) {
      body{font-size:16px;}
  }
  </style>
</head>
<body>
<hr />
<p>layout: post<br />
title: MySQL&#20998;&#32452;&#21462;&#26368;&#20540;<br />
category: code<br />
date: 2018/8/28/&#26143;&#26399;&#20108; 17:31:54<br />
description: MySQL&#20998;&#32452;&#21462;&#26368;&#22823;(&#26368;&#23567;&#12289;&#26368;&#26032;&#12289;&#21069;N&#26465;)&#26465;&#35760;&#24405;<br />
---</p>
<blockquote>
<p>&#22312;&#25968;&#25454;&#24211;&#24320;&#21457;&#36807;&#31243;&#20013;&#65292;&#25105;&#20204;&#35201;&#20026;&#27599;&#31181;&#31867;&#22411;&#30340;&#25968;&#25454;&#21462;&#20986;&#21069;&#20960;&#26465;&#35760;&#24405;&#65292;&#25110;&#32773;&#26159;&#21462;&#26368;&#26032;&#12289;&#26368;&#23567;&#12289;&#26368;&#22823;&#31561;&#31561;&#65292;&#36825;&#20010;&#35813;&#22914;&#20309;&#23454;&#29616;&#65311;</p>
</blockquote>
<h4>&#20934;&#22791;&#27979;&#35797;&#25968;&#25454;</h4>
<pre><code>create table tb (name vatrchar(10), val int, memo varchar(20))

insert into tb values(&#39;a&#39;,    2,   &#39;a2&#39;)
insert into tb values(&#39;a&#39;,    1,   &#39;a1&#39;)
insert into tb values(&#39;a&#39;,    3,   &#39;a3&#39;)
insert into tb values(&#39;b&#39;,    1,   &#39;b1&#39;)
insert into tb values(&#39;b&#39;,    3,   &#39;b3&#39;)
insert into tb values(&#39;b&#39;,    2,   &#39;b2&#39;)
insert into tb values(&#39;b&#39;,    4,   &#39;b4&#39;)
insert into tb values(&#39;b&#39;,    5,   &#39;b5&#39;)</code></pre>
<h4 id="nameval">&#25353;name&#20998;&#32452;&#21462;val&#26368;&#22823;&#30340;&#20540;&#25152;&#22312;&#34892;&#30340;&#25968;&#25454;</h4>
<h6>&#26041;&#27861;&#19968;&#65306;</h6>
<p><code>select t1.* from tb t1 where val = (select max(t2.val) from tb t2 where t2.name = t1.name) order by t1.name</code></p>
<h6>&#26041;&#27861;&#20108;&#65306;</h6>
<p><code>select t1.* from tb t1 where not exists(select 1 from tb t2 where t2.name = t1.name and t2.val &gt; t1.val)</code></p>
<h6>&#26041;&#27861;&#19977;&#65306;</h6>
<p><code>select t1.* from tb t1,(select t2.name,max(t2.val) val from tb t2 group by name) t3 where t1.name = t3.name and t1.val = t3.val order by t1.name</code></p>
<h6>&#26041;&#27861;&#22235;&#65306;</h6>
<p><code>select t1.* from tb t1 inner join (select t1.name, max(t1.val) val from tb t2 group by name) t3 on t1.name = t3.name and t1.val = t3.val order by t1.name</code></p>
<h6>&#26041;&#27861;&#20116;&#65306;</h6>
<p><code>select t1.* from tb t1 where 1 &gt; (select count(*) from tb where name = t1.name and val &gt; a.val) order by t1.name</code></p>
<p>&#25512;&#33616;&#20351;&#29992;1,3,4&#31181;&#26041;&#27861;&#65292;&#25928;&#29575;&#31245;&#39640;&#19968;&#20123;&#65292;&#31532;2,5&#31181;&#26041;&#27861;&#25928;&#29575;&#31245;&#24046;&#19968;&#20123;&#12290;</p>
<p>....&#26410;&#23436;&#24453;&#32493;</p>
</body>
</html>
